<div class="home-callout container-fluid">
  <div class="container text-center">
    <h1>Welcome to Velocity Laboratories</h1>
    <h3>Helping out clients bring new pain relieving medicines to market sooner through innovative and accelerated preclinical testing.</h3>
  </div>
</div>

<div class="container home-signup-links">
  <div class="row">
    <% if user_signed_in? %>
      <div class="col-md-6">
        <div class="well">
          <h2 class="text-center">Your Profile</h2>
          <% if current_user.profile %>
            <%= link_to "Edit your profile", edit_user_profile_path(user_id: current_user.id), class: 'btn btn-default btn-lg btn-block' %>
            <%= link_to "View your profile", user_path(id: current_user.id), class: 'btn btn-default btn-lg btn-block' %>
          <% else %>
            <p class="text-center">Create your profile so that you can join a group.</p>
            <%= link_to "Create your profile", new_user_profile_path(user_id: current_user.id), class: 'btn btn-default btn-lg btn-block' %>
          <% end %>
        </div>
      </div>
      <div class="col-md-6">
        <div class="well">
          <% if current_user.organization %>
            <%= link_to "View Organization", organization_path(id: current_user.organization_id), class: 'btn btn-default btn-lg btn-block' %>
          <% else %>
            <% if current_user.plan_id==3 %>
              <%= link_to "Create an Organization", new_organization_path, class: 'btn btn-default btn-lg btn-block' %>
            <% else %>
              <%= link_to "Join an Organization", organizations_path, class: 'btn btn-default btn-lg btn-block' %>
            <% end %>
          <% end %>
          
          <!-- check if plan 3 members made an organization yet, they must do this prior to group instantiation -->
          <% unless current_user.groups.empty? %>
            <%= link_to "View Groups", groups_path, class: 'btn btn-default btn-lg btn-block' %>
          <% end %>
          <% if current_user.has_role?(:group_creator) || current_user.has_role?(:organization_creator) %>
            <%= link_to "Create a New Group", new_group_path, class: 'btn btn-default btn-lg btn-block' %>
          <% end %>
          <%= link_to "Join an Existing Group", groups_path, class: 'btn btn-default btn-lg btn-block' %>
        </div>
      </div>
    <% else %>
      <div class="col-md-4">
        <div class="well">
          <h2 class="text-center">Basic Membership</h2>
          <h4 class="text-center">Sign up for free to purchase products or join existing groups.</h4>
          <br/>
          <%= link_to "Sign up with Basic", new_user_registration_path(plan: @basic_plan.id), class: 'btn btn-primary btn-lg btn-block' %>
          <br/>
          <ul>
            <li>Purchase items in shop</li>
            <li>Join existing groups and organizations</li>
          </ul>
        </div>
      </div>
      <div class="col-md-4">
        <div class="well">
          <h2 class="text-center">Premium Membership</h2>
          <h4 class="text-center">Sign up for the premium account to create a group ($10/month).</h4>
          <br/>
          <%= link_to "Sign up with Premium", new_user_registration_path(plan: @group_plan.id), class: 'btn btn-success btn-lg btn-block' %>
          <br/>
          <ul>
            <li>Purchase items in shop</li>
            <li>Create a small group</li>
            <li>Regulate user access</li>
          </ul>
        </div>
      </div>
      <div class="col-md-4">
        <div class="well">
          <h2 class="text-center">Pro Membership</h2>
          <h4 class="text-center">Sign up for the organization account to create an organization ($100/month).</h4>
          <br/>
          <%= link_to "Sign up with Pro", new_user_registration_path(plan: @pro_plan.id), class: 'btn btn-success btn-lg btn-block' %>
          <br/>
          <ul>
            <li>Purchase items in shop</li>
            <li>Create an organization</li>
            <li>Unlimited groups within organization</li>
            <li>Regulate group access to other groups within organization</li>
          </ul>
        </div>
      </div>
    <% end %>
  </div>
</div>
<div class="container home-plan-chart">
  <div class="row">
    <div class="col-md-6 col-offset-3">
      <table class="table table-hover table-bordered">
        <thead>
          <tr>
            <th></th>
            <th>Basic</th>
            <th>Premium</th>
            <th>Pro</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Shop</td>
            <td><i class='fa fa-check'></i></td>
            <td><i class='fa fa-check'></i></td>
            <td><i class='fa fa-check'></i></td>
          </tr>
          <tr>
            <td>Join Group/Organizations</td>
            <td><i class='fa fa-check'></i></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div>
  <h1>has role organization_creator</h1>
  <% if user_signed_in? %>
    <%= current_user.has_role? :organization_creator%>
  <% else %>
    <p>Not signed in</p>
  <% end %>
  <h1>can create organization</h1>
  <%= can? :create, Organization %>
  <h1>can read organization</h1>
  <%= can? :read, Organization %>
  <h1>can read organizations/5</h1>
  <%= can? :read, Organization.find(5) %>
</div>